<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Sign Up - EventHub</title>
    <link rel="stylesheet" href="style2.css">
</head>

<body class="bg-light">
    <!-- Navbar from index.html -->
    <nav class="navbar">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="index.html" style="font-size: 30px;">EventHub</a>
            <button class="navbar-toggler" type="button" id="navbarToggle" aria-controls="navbarNav"
                aria-expanded="false" aria-label="Toggle navigation">
                <span>â˜°</span>
            </button>
            <div class="navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <!-- <li class="nav-item"><a class="nav-link" href="index.html#events">Events</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
                    <li class="nav-item"><a class="btn btn-outline-dark ms-2" href="admin-login.html">Admin Login</a></li>-->
                    <li class="nav-item ms-3">
                        <button id="darkModeToggle" class="btn btn-secondary btn-sm">ðŸŒ™ Dark Mode</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content: Admin Sign Up Form -->
    <div class="login-container py-5">
        <div class="login-card">
            <div class="card-body">
                <h2 class="text-center fw-bold mb-4">Create Admin Account</h2>

                <form id="signupForm">
                    <!-- Form Message Box -->
                    <div id="formMessage" class="form-message" style="display: none;" role="alert"></div>

                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" class="form-control" id="fullName" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" class="form-control" id="password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword" required>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 btn-lg mt-3">Sign Up</button>
                </form>

                <p class="text-center text-muted mt-4">
                    Already have an account? <a href="admin-login.html" class="text-primary fw-semibold">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Footer from index.html -->
    <footer id="contact" class="bg-gradient-primary text-white text-center py-4">
        <p class="mb-0">Â© 2025 EventHub. All rights reserved.</p>
    </footer>

    <script>
        // --- Navbar & Dark Mode Script (from index.html) ---

        // Dark Mode Toggle
        const toggle = document.getElementById('darkModeToggle');
        toggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            toggle.textContent = isDark ? 'â˜€ï¸ Light Mode' : 'ðŸŒ™ Dark Mode';
            localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled'); // Save preference
        });

        // Mobile Menu Toggle
        const navbarToggle = document.getElementById('navbarToggle');
        const navbarNav = document.getElementById('navbarNav');
        navbarToggle.addEventListener('click', () => {
            const isOpen = navbarNav.classList.toggle('show');
            navbarToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        });

        // Apply saved dark mode state on load
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'enabled') {
                document.body.classList.add('dark-mode');
                toggle.textContent = 'â˜€ï¸ Light Mode';
            } else {
                document.body.classList.remove('dark-mode');
                toggle.textContent = 'ðŸŒ™ Dark Mode';
            }
        });

        // --- Sign Up Form Script (MODIFIED) ---
        const signupForm = document.getElementById('signupForm');
        const formMessage = document.getElementById('formMessage');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const emailInput = document.getElementById('email');
        const fullNameInput = document.getElementById('fullName');

        // This key MUST match the one in admin-login.html
        const ADMIN_STORAGE_KEY = 'eventhub_admins';

        signupForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent actual form submission

            // Clear previous messages
            formMessage.style.display = 'none';
            formMessage.classList.remove('success', 'error');
            formMessage.textContent = '';

            // Get values
            const pass = passwordInput.value;
            const confirmPass = confirmPasswordInput.value;
            const fullName = fullNameInput.value;
            const email = emailInput.value;

            // --- Validation ---
            // 1. Check if passwords match
            if (pass !== confirmPass) {
                formMessage.textContent = 'Passwords do not match. Please try again.';
                formMessage.classList.add('error');
                formMessage.style.display = 'block';
                return; // Stop execution
            }

            // --- Check for existing user ---
            // 2. Get admins from localStorage
            let admins = JSON.parse(localStorage.getItem(ADMIN_STORAGE_KEY)) || [];

            // 3. Check if email is already used
            const existingAdmin = admins.find(admin => admin.email === email);
            if (existingAdmin) {
                formMessage.textContent = 'An account with this email already exists. Please log in.';
                formMessage.classList.add('error');
                formMessage.style.display = 'block';
                return; // Stop execution
            }

            // --- Save New User ---
            // 4. Create new admin object (must match login page's object structure)
            const newAdmin = {
                fullName: fullName,
                email: email,
                password: pass
            };

            // 5. Add to the array
            admins.push(newAdmin);

            // 6. Save back to localStorage
            localStorage.setItem(ADMIN_STORAGE_KEY, JSON.stringify(admins));

            // --- Show Success ---
            formMessage.textContent = `Success! Account created for ${fullName}. You can now log in.`;
            formMessage.classList.add('success');
            formMessage.style.display = 'block';

            // Clear the form
            signupForm.reset();

        });
    </script>
</body>

</html>